# ุงุฎุชุจุงุฑ API ูุงุฆูุฉ ุงูููุชุฌุงุช ููุชูุฒูุน

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก API ุฌุฏูุฏ ูุฅุฑุฌุงุน ูุงุฆูุฉ ุงูููุชุฌุงุช ููุงุฎุชูุงุฑ ูุน ุงููููุงุช ุงููุชุงุญุฉ. ูุฏุนู ุญุงูุชูู:
1. **ูุน DistributionTripId**: ุฅุฑุฌุงุน ุงูููุชุฌุงุช ุงููุชุจููุฉ ูู ุฑุญูุฉ ุงูุชูุฒูุน
2. **ุจุฏูู DistributionTripId**: ุฅุฑุฌุงุน ุงูููุชุฌุงุช ุงูุฌุงูุฒุฉ ููุจูุน (ุงููุญูุตุฉ)

## ๐ง API ุงูุฌุฏูุฏ

### **Endpoint:**
```
GET /api/Lookup/GetProductSelectListForDistribution
```

### **ุงููุนุงููุงุช:**
- `DistributionTripId` (ุงุฎุชูุงุฑู): ุฑูู ุฑุญูุฉ ุงูุชูุฒูุน

### **Response Format:**
```json
{
  "succeeded": true,
  "data": [
    {
      "value": "1",
      "label": "ุจู ุฃุฑุงุจููุง",
      "qty": 50.00
    },
    {
      "value": "2", 
      "label": "ุจู ุฑูุจูุณุชุง",
      "qty": 30.00
    }
  ]
}
```

## ๐งช ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

### **ุงูุงุฎุชุจุงุฑ 1: ุงูุญุตูู ุนูู ุงูููุชุฌุงุช ุงูุฌุงูุฒุฉ ููุจูุน**

**Request:**
```
GET /api/Lookup/GetProductSelectListForDistribution
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุฅุฑุฌุงุน ุงูููุชุฌุงุช ุงูุชู `NeedsRoasting = false`
- ููุท ุงูููุชุฌุงุช ุงูุชู ูุฏููุง `AvailableQty > 0`
- ูุฑุชุจุฉ ุญุณุจ ุงูุงุณู

**ูุซุงู Response:**
```json
{
  "succeeded": true,
  "data": [
    {
      "value": "1",
      "label": "ุจู ุฃุฑุงุจููุง ูุญูุต",
      "qty": 100.00
    },
    {
      "value": "3",
      "label": "ุจู ูููููุจูุง ูุญูุต",
      "qty": 75.00
    }
  ]
}
```

---

### **ุงูุงุฎุชุจุงุฑ 2: ุงูุญุตูู ุนูู ุงูููุชุฌุงุช ุงููุชุจููุฉ ูู ุฑุญูุฉ ุงูุชูุฒูุน**

**Request:**
```
GET /api/Lookup/GetProductSelectListForDistribution?DistributionTripId=1
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุฅุฑุฌุงุน ุงูููุชุฌุงุช ูู ุฑุญูุฉ ุงูุชูุฒูุน ุงููุญุฏุฏุฉ
- ููุท ุงูููุชุฌุงุช ุงูุชู ูุฏููุง ูููุฉ ูุชุจููุฉ > 0
- ุงููููุฉ ุงููุชุจููุฉ = ุงููุญููุฉ - ุงููุจุงุนุฉ - ุงููุฑุฌุนุฉ

**ูุซุงู Response:**
```json
{
  "succeeded": true,
  "data": [
    {
      "value": "1",
      "label": "ุจู ุฃุฑุงุจููุง",
      "qty": 20.00
    }
  ]
}
```

---

### **ุงูุงุฎุชุจุงุฑ 3: ุฑุญูุฉ ุชูุฒูุน ุบูุฑ ููุฌูุฏุฉ**

**Request:**
```
GET /api/Lookup/GetProductSelectListForDistribution?DistributionTripId=999
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```json
{
  "succeeded": true,
  "data": []
}
```

---

### **ุงูุงุฎุชุจุงุฑ 4: ุฑุญูุฉ ุชูุฒูุน ุจุฏูู ููุชุฌุงุช ูุชุจููุฉ**

**Request:**
```
GET /api/Lookup/GetProductSelectListForDistribution?DistributionTripId=2
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```json
{
  "succeeded": true,
  "data": []
}
```

## ๐ ุงูุจูุงูุงุช ุงููุทููุจุฉ ููุงุฎุชุจุงุฑ

### **1. ุงูููุชุฌุงุช:**
```json
// ููุชุฌ ุฌุงูุฒ ููุจูุน (ูุญูุต)
{
  "id": 1,
  "name": "ุจู ุฃุฑุงุจููุง ูุญูุต",
  "needsRoasting": false,
  "isActive": true
}

// ููุชุฌ ูุญุชุงุฌ ุชุญููุต
{
  "id": 2,
  "name": "ุจู ุฃุฑุงุจููุง ุฎุงู",
  "needsRoasting": true,
  "isActive": true
}
```

### **2. ุฑุตูุฏ ุงูููุชุฌุงุช:**
```json
{
  "productId": 1,
  "availableQty": 100.00,
  "qty": 100.00
}
```

### **3. ุฑุญูุฉ ุงูุชูุฒูุน:**
```json
{
  "id": 1,
  "status": "GoodsReceived",
  "details": [
    {
      "productId": 1,
      "qty": 50.00,        // ูุญูู
      "soldQty": 20.00,    // ูุจุงุน
      "returnedQty": 10.00 // ูุฑุชุฌุน
      // ุงููุชุจูู = 50 - 20 - 10 = 20
    }
  ]
}
```

## ๐ ุงูุชุญูู ูู ุงููุชุงุฆุฌ

### **ููุญุงูุฉ ุงูุฃููู (ุจุฏูู DistributionTripId):**
- โ ุฅุฑุฌุงุน ุงูููุชุฌุงุช ุงูุชู `NeedsRoasting = false`
- โ ุฅุฑุฌุงุน ุงูููุชุฌุงุช ุงูุชู `AvailableQty > 0`
- โ ุชุฑุชูุจ ุญุณุจ ุงูุงุณู
- โ ุงุณุชุจุนุงุฏ ุงูููุชุฌุงุช ุงูุชู ุชุญุชุงุฌ ุชุญููุต
- โ ุงุณุชุจุนุงุฏ ุงูููุชุฌุงุช ุจุฏูู ูููุฉ ูุชุงุญุฉ

### **ููุญุงูุฉ ุงูุซุงููุฉ (ูุน DistributionTripId):**
- โ ุฅุฑุฌุงุน ุงูููุชุฌุงุช ูู ุฑุญูุฉ ุงูุชูุฒูุน ุงููุญุฏุฏุฉ
- โ ุญุณุงุจ ุงููููุฉ ุงููุชุจููุฉ ุจุดูู ุตุญูุญ
- โ ุงุณุชุจุนุงุฏ ุงูููุชุฌุงุช ุจุฏูู ูููุฉ ูุชุจููุฉ
- โ ุชุฑุชูุจ ุญุณุจ ุงูุงุณู
- โ ุงุณุชุจุนุงุฏ ุงูููุชุฌุงุช ุงููุจุงุนุฉ ุจุงููุงูู

## ๐จ ุงุฎุชุจุงุฑ ุงูุญุงูุงุช ุงูุงุณุชุซูุงุฆูุฉ

### **1. ูุนุงูู ุบูุฑ ุตุญูุญ:**
```
GET /api/Lookup/GetProductSelectListForDistribution?DistributionTripId=abc
```
**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ุฎุทุฃ 400 Bad Request

### **2. ูุนุงูู ุณุงูุจ:**
```
GET /api/Lookup/GetProductSelectListForDistribution?DistributionTripId=-1
```
**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ุฅุฑุฌุงุน ูุงุฆูุฉ ูุงุฑุบุฉ

### **3. ุจุฏูู ุชูููุถ:**
```
GET /api/Lookup/GetProductSelectListForDistribution
```
**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ุฎุทุฃ 401 Unauthorized (ุฅุฐุง ูุงู ูุทููุจ)

## ๐ ููุงุญุธุงุช ุงูุงุฎุชุจุงุฑ

1. **ุชุฃูุฏ ูู ูุฌูุฏ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ** ูุจู ุงูุงุฎุชุจุงุฑ
2. **ุงุฎุชุจุฑ ุงูุญุงูุชูู** (ูุน ูุจุฏูู DistributionTripId)
3. **ุชุญูู ูู ุตุญุฉ ุงูุญุณุงุจุงุช** ูููููุงุช ุงููุชุจููุฉ
4. **ุงุฎุชุจุฑ ุงูุญุงูุงุช ุงูุงุณุชุซูุงุฆูุฉ**
5. **ุชุญูู ูู ุงูุฃุฏุงุก** ูุน ููุงุฆู ูุจูุฑุฉ

## ๐ฏ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุฅููุงู ุฌููุน ุงูุงุฎุชุจุงุฑุงุชุ ูุฌุจ ุฃู ูููู API ูุนูู ุจุดูู ุตุญูุญ:
- ุฅุฑุฌุงุน ุงูููุชุฌุงุช ุงูุฌุงูุฒุฉ ููุจูุน ุนูุฏ ุนุฏู ุชุญุฏูุฏ ุฑุญูุฉ
- ุฅุฑุฌุงุน ุงูููุชุฌุงุช ุงููุชุจููุฉ ุนูุฏ ุชุญุฏูุฏ ุฑุญูุฉ ุชูุฒูุน
- ุญุณุงุจ ุงููููุงุช ุจุดูู ุตุญูุญ
- ูุนุงูุฌุฉ ุงูุญุงูุงุช ุงูุงุณุชุซูุงุฆูุฉ ุจุดูู ููุงุณุจ
- ุฃุฏุงุก ุฌูุฏ ูุน ููุงุฆู ูุจูุฑุฉ

---

*ุชู ุฅุนุฏุงุฏ ูุฐุง ุงูุฏููู ูุงุฎุชุจุงุฑ API ูุงุฆูุฉ ุงูููุชุฌุงุช ููุชูุฒูุน ุงูุฌุฏูุฏ*
