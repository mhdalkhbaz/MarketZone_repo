# ุงุฎุชุจุงุฑ ุณูุฑ ุนูู ุฑุญูุงุช ุงูุชูุฒูุน - MarketZone

## ๐งช ุณููุงุฑูู ุงูุงุฎุชุจุงุฑ ุงูุดุงูู

### **ุงูุจูุงูุงุช ุงููุทููุจุฉ ููุงุฎุชุจุงุฑ:**

#### **1. ุงูููุธููู (Employees)**
```json
POST /api/Employee/CreateEmployee
{
  "name": "ุฃุญูุฏ ูุญูุฏ",
  "phone": "0123456789",
  "email": "ahmed@marketzone.com",
  "address": "ุงููุงูุฑุฉ"
}
```

#### **2. ุงูุณูุงุฑุงุช (Cars)**
```json
POST /api/Car/CreateCar
{
  "name": "ุณูุงุฑุฉ ุชูุฒูุน 1",
  "plateNumber": "ุฃ ุจ ุฌ 123",
  "model": "2023",
  "year": 2023,
  "capacityKg": 1000,
  "isAvailable": true
}
```

#### **3. ุงูููุงุทู (Regions)**
```json
POST /api/Region/CreateRegion
{
  "name": "ุงูููุทูุฉ ุงูุดูุงููุฉ",
  "description": "ุชุบุทู ุดูุงู ุงููุงูุฑุฉ",
  "isActive": true
}
```

#### **4. ุงูุนููุงุก (Customers)**
```json
POST /api/Customer/CreateCustomer
{
  "name": "ูุญู ุงูุจู ุงูุทุงุฒุฌ",
  "phone": "0987654321",
  "email": "customer1@example.com",
  "address": "ุดุงุฑุน ุงููููุ ุงููุงูุฑุฉ",
  "whatsAppPhone": "0987654321"
}
```

#### **5. ุงูููุชุฌุงุช (Products)**
```json
POST /api/Product/CreateProduct
{
  "name": "ุจู ุฃุฑุงุจููุง",
  "description": "ุจู ุฃุฑุงุจููุง ุนุงูู ุงูุฌูุฏุฉ",
  "categoryId": 1,
  "unitOfMeasure": "ูููู",
  "barCode": "123456789",
  "barCode2": "987654321"
}
```

---

## ๐ ุณูุฑ ุงูุนูู ุงููุงูู ููุงุฎุชุจุงุฑ

### **ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุฑุญูุฉ ุชูุฒูุน ุฌุฏูุฏุฉ**

```bash
POST /api/DistributionTrip/CreateDistributionTrip
```

```json
{
  "employeeId": 1,
  "carId": 1,
  "regionId": 1,
  "tripDate": "2025-01-15",
  "loadQty": 500,
  "notes": "ุฑุญูุฉ ุชูุฒูุน ููููุทูุฉ ุงูุดูุงููุฉ - ุงุฎุชุจุงุฑ ุดุงูู",
  "details": [
    {
      "productId": 1,
      "qty": 100,
      "expectedPrice": 25.50
    },
    {
      "productId": 2,
      "qty": 50,
      "expectedPrice": 30.00
    }
  ]
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุฑุญูุฉ ุชูุฒูุน ุฌุฏูุฏุฉ ุจุฑูู ID
- ุญุงูุฉ ุงูุฑุญูุฉ: `Draft` (ูุณูุฏุฉ)
- `SoldQty` = 0 ูุฌููุน ุงูููุชุฌุงุช
- `ReturnedQty` = 0 ูุฌููุน ุงูููุชุฌุงุช

---

### **ุงูุฎุทูุฉ 2: ุชุฑุญูู ุงูุฑุญูุฉ**

```bash
PUT /api/DistributionTrip/PostDistributionTrip
```

```json
{
  "id": 1
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุญุงูุฉ ุงูุฑุญูุฉ: `Posted` (ูุฑุญูุฉ)
- ุงูุฑุญูุฉ ุฌุงูุฒุฉ ููุชูููุฐ

---

### **ุงูุฎุทูุฉ 3: ุงุณุชูุงู ุงูุจุถุงุนุฉ (ุชุณุฌูู ุงููุฑุชุฌุนุงุช)**

```bash
PUT /api/DistributionTrip/ReceiveGoods
```

```json
{
  "tripId": 1,
  "details": [
    {
      "detailId": 1,
      "returnedQty": 15
    },
    {
      "detailId": 2,
      "returnedQty": 5
    }
  ]
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุญุงูุฉ ุงูุฑุญูุฉ: `GoodsReceived` (ุชู ุงุณุชูุงู ุงูุจุถุงุนุฉ)
- `ReturnedQty` = 15 ููููุชุฌ ุงูุฃูู
- `ReturnedQty` = 5 ููููุชุฌ ุงูุซุงูู
- `SoldQty` = 0 (ูู ูุชู ุฅูุดุงุก ููุงุชูุฑ ุจุนุฏ)

---

### **ุงูุฎุทูุฉ 4: ุฅูุดุงุก ูุงุชูุฑุฉ ูุจูุนุงุช ููุฒุน (ุงูุนููู ุงูุฃูู)**

```bash
POST /api/SalesInvoice/CreateSalesInvoice
```

```json
{
  "invoiceNumber": "INV-DIST-001",
  "customerId": 1,
  "invoiceDate": "2025-01-15",
  "totalAmount": 765.00,
  "discount": 0,
  "paymentMethod": "ููุฏู",
  "notes": "ูุงุชูุฑุฉ ุชูุฒูุน - ุงูุนููู ุงูุฃูู",
  "type": "Distributor",
  "distributionTripId": 1,
  "details": [
    {
      "productId": 1,
      "quantity": 30,
      "unitPrice": 25.50,
      "subTotal": 765.00,
      "notes": "ุทูุจ ุนุงุฏู"
    }
  ]
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ูุงุชูุฑุฉ ูุจูุนุงุช ุฌุฏูุฏุฉ ุจุฑูู ID
- `SoldQty` ููููุชุฌ ุงูุฃูู ูู ุฑุญูุฉ ุงูุชูุฒูุน = 30
- `SoldQty` ููููุชุฌ ุงูุซุงูู = 0

---

### **ุงูุฎุทูุฉ 5: ุฅูุดุงุก ูุงุชูุฑุฉ ูุจูุนุงุช ููุฒุน (ุงูุนููู ุงูุซุงูู)**

```bash
POST /api/SalesInvoice/CreateSalesInvoice
```

```json
{
  "invoiceNumber": "INV-DIST-002",
  "customerId": 2,
  "invoiceDate": "2025-01-15",
  "totalAmount": 637.50,
  "discount": 0,
  "paymentMethod": "ุดูู",
  "notes": "ูุงุชูุฑุฉ ุชูุฒูุน - ุงูุนููู ุงูุซุงูู",
  "type": "Distributor",
  "distributionTripId": 1,
  "details": [
    {
      "productId": 1,
      "quantity": 25,
      "unitPrice": 25.50,
      "subTotal": 637.50,
      "notes": "ุทูุจ ุนุงุฌู"
    }
  ]
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ูุงุชูุฑุฉ ูุจูุนุงุช ุฌุฏูุฏุฉ ุจุฑูู ID
- `SoldQty` ููููุชุฌ ุงูุฃูู ูู ุฑุญูุฉ ุงูุชูุฒูุน = 55 (30 + 25)
- `SoldQty` ููููุชุฌ ุงูุซุงูู = 0

---

### **ุงูุฎุทูุฉ 6: ุงูุชุญูู ูู ุงููููุงุช**

```bash
GET /api/DistributionTrip/ValidateTripQuantities?TripId=1
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```json
{
  "isValid": true,
  "errors": [],
  "warnings": [
    {
      "detailId": 2,
      "productName": "ุจู ุฃุฑุงุจููุง",
      "warningMessage": "ูู ูุชู ุชุณุฌูู ุฃู ูุจูุนุงุช ุฃู ูุฑุชุฌุนุงุช ููุฐุง ุงูููุชุฌ"
    }
  ]
}
```

---

### **ุงูุฎุทูุฉ 7: ุฅููุงู ุงูุฑุญูุฉ**

```bash
PUT /api/DistributionTrip/CompleteTrip
```

```json
{
  "tripId": 1
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุญุงูุฉ ุงูุฑุญูุฉ: `Completed` (ููุชููุฉ)
- ุงูุฑุญูุฉ ููุชููุฉ ุจูุฌุงุญ

---

## ๐ ุงูุชุญูู ูู ุงููุชุงุฆุฌ

### **ุงูุชุญูู ูู ุฑุญูุฉ ุงูุชูุฒูุน:**

```bash
GET /api/DistributionTrip/GetPagedListDistributionTrip?PageNumber=1&PageSize=10
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```json
{
  "data": [
    {
      "id": 1,
      "employeeId": 1,
      "carId": 1,
      "regionId": 1,
      "tripDate": "2025-01-15T00:00:00",
      "loadQty": 500,
      "notes": "ุฑุญูุฉ ุชูุฒูุน ููููุทูุฉ ุงูุดูุงููุฉ - ุงุฎุชุจุงุฑ ุดุงูู",
      "status": "Completed",
      "details": [
        {
          "id": 1,
          "productId": 1,
          "qty": 100,
          "expectedPrice": 25.50,
          "returnedQty": 15,
          "soldQty": 55
        },
        {
          "id": 2,
          "productId": 2,
          "qty": 50,
          "expectedPrice": 30.00,
          "returnedQty": 5,
          "soldQty": 0
        }
      ]
    }
  ]
}
```

### **ุงูุชุญูู ูู ููุงุชูุฑ ุงููุจูุนุงุช:**

```bash
GET /api/SalesInvoice/GetPagedListSalesInvoice?PageNumber=1&PageSize=10
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```json
{
  "data": [
    {
      "id": 1,
      "invoiceNumber": "INV-DIST-001",
      "customerId": 1,
      "type": "Distributor",
      "distributionTripId": 1,
      "totalAmount": 765.00,
      "status": "Draft"
    },
    {
      "id": 2,
      "invoiceNumber": "INV-DIST-002",
      "customerId": 2,
      "type": "Distributor",
      "distributionTripId": 1,
      "totalAmount": 637.50,
      "status": "Draft"
    }
  ]
}
```

---

## โ ูุนุงููุฑ ุงููุฌุงุญ

### **1. ุณูุฑ ุงูุนูู:**
- โ ุฅูุดุงุก ุฑุญูุฉ ุชูุฒูุน ุจูุฌุงุญ
- โ ุชุฑุญูู ุงูุฑุญูุฉ ุจูุฌุงุญ
- โ ุงุณุชูุงู ุงูุจุถุงุนุฉ ุจูุฌุงุญ
- โ ุฅูุดุงุก ููุงุชูุฑ ุงููุจูุนุงุช ุจูุฌุงุญ
- โ ุชุญุฏูุซ `SoldQty` ุชููุงุฆูุงู
- โ ุงูุชุญูู ูู ุงููููุงุช ุจูุฌุงุญ
- โ ุฅููุงู ุงูุฑุญูุฉ ุจูุฌุงุญ

### **2. ุงูุจูุงูุงุช:**
- โ `SoldQty` ุชูุญุฏุซ ุชููุงุฆูุงู ุนูุฏ ุฅูุดุงุก ููุงุชูุฑ ุงููุจูุนุงุช
- โ `ReturnedQty` ุชูุฎุฒู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุงูุนูุงูุงุช ุจูู ุงูููุงูุงุช ุชุนูู ุจุดูู ุตุญูุญ
- โ ุงูุชุญูู ูู ุงููููุงุช ูุนูู ุจุดูู ุตุญูุญ

### **3. API Endpoints:**
- โ ุฌููุน ุงูู Endpoints ุชุนูู ุจุดูู ุตุญูุญ
- โ ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูุนูู
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุชุนูู

---

## ๐จ ุงุฎุชุจุงุฑ ุงูุญุงูุงุช ุงูุงุณุชุซูุงุฆูุฉ

### **1. ูุญุงููุฉ ุฅูุดุงุก ูุงุชูุฑุฉ ููุฒุน ูุฑุญูุฉ ุบูุฑ ููุฌูุฏุฉ:**
```json
{
  "distributionTripId": 999,
  "type": "Distributor"
}
```
**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ุฎุทุฃ 404 - ุฑุญูุฉ ุงูุชูุฒูุน ุบูุฑ ููุฌูุฏุฉ

### **2. ูุญุงููุฉ ุฅูุดุงุก ูุงุชูุฑุฉ ููุฒุน ูุฑุญูุฉ ูู ุญุงูุฉ Draft:**
```json
{
  "distributionTripId": 1,
  "type": "Distributor"
}
```
**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ุฎุทุฃ - ูุง ูููู ุฅูุดุงุก ูุงุชูุฑุฉ ููุฒุน ูุฑุญูุฉ ูู ุญุงูุฉ Draft

### **3. ูุญุงููุฉ ุงุณุชูุงู ุงูุจุถุงุนุฉ ูุฑุญูุฉ ูู ุญุงูุฉ Draft:**
```json
{
  "tripId": 1
}
```
**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ุฎุทุฃ - ูุง ูููู ุงุณุชูุงู ุงูุจุถุงุนุฉ ูุฑุญูุฉ ูู ุญุงูุฉ Draft

---

## ๐ ููุงุญุธุงุช ุงูุงุฎุชุจุงุฑ

1. **ุชุฃูุฏ ูู ูุฌูุฏ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ** ูุจู ุจุฏุก ุงูุงุฎุชุจุงุฑ
2. **ุงุญูุธ ุงูู IDs** ุงููุณุชุฎุฏูุฉ ูู ุงูุงุฎุชุจุงุฑ ููุชุญูู ูููุง
3. **ุงุฎุชุจุฑ ุงูุญุงูุงุช ุงูุงุณุชุซูุงุฆูุฉ** ููุชุฃูุฏ ูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
4. **ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช** ูุจุงุดุฑุฉ ููุชุฃูุฏ ูู ุตุญุฉ ุงูุจูุงูุงุช
5. **ุงุฎุชุจุฑ ุงูุฃุฏุงุก** ูุน ูููุงุช ูุจูุฑุฉ ูู ุงูุจูุงูุงุช

---

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุจุนุฏ ุฅููุงู ุฌููุน ุงูุฎุทูุงุชุ ูุฌุจ ุฃู ูููู ูุฏูู:
- ุฑุญูุฉ ุชูุฒูุน ููุชููุฉ
- ููุงุชูุฑ ูุจูุนุงุช ููุฒุน ูุฑุชุจุทุฉ ุจุงูุฑุญูุฉ
- ูููุงุช ูุจุงุนุฉ ูุญุฏุซุฉ ุชููุงุฆูุงู
- ูููุงุช ูุฑุฌุนุฉ ูุฎุฒูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุธุงู ูุนูู ุจุดูู ูุชูุงูู ููุชูุงุณู
