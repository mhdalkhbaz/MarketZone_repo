# ุณููุงุฑูู ุนูู ุฑุญูุงุช ุงูุชูุฒูุน ูู MarketZone (ูุญุฏุซ)

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุณููุงุฑูู ุนูู ุฑุญูุงุช ุงูุชูุฒูุน ูุชุถูู ุฅุฏุงุฑุฉ ุดุงููุฉ ูุนูููุฉ ุชูุฒูุน ุงูููุชุฌุงุช ูู ุงููุณุชูุฏุน ุฅูู ุงูุนููุงุก ุนุจุฑ ุงูููุฒุนูู.

## ๐ ุฏูุฑุฉ ุญูุงุฉ ุฑุญูุฉ ุงูุชูุฒูุน (ูุญุฏุซุฉ)

### **ุงููุฑุญูุฉ ุงูุฃููู: ุฅูุดุงุก ุฑุญูุฉ ุงูุชูุฒูุน**
```
1. ุฅูุดุงุก ุฑุญูุฉ ุชูุฒูุน ุฌุฏูุฏุฉ
2. ุชุญุฏูุฏ ุงูููุธู ุงููุณุคูู
3. ุงุฎุชูุงุฑ ุงูุณูุงุฑุฉ ุงูููุงุณุจุฉ
4. ุชุญุฏูุฏ ุงูููุทูุฉ ุงููุณุชูุฏูุฉ
5. ุชุญุฏูุฏ ุชุงุฑูุฎ ุงูุฑุญูุฉ
6. ุฅุถุงูุฉ ุงูููุชุฌุงุช ูุงููููุงุช ุงููุทููุจุฉ
```

**API:** `POST /api/DistributionTrip/CreateDistributionTrip`

### **ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุชุฑุญูู ุงูุฑุญูุฉ**
```
- ุชุบููุฑ ุญุงูุฉ ุงูุฑุญูุฉ ูู "ูุณูุฏุฉ" ุฅูู "ูุฑุญูุฉ"
- ุฅุนุฏุงุฏ ุงูุฑุญูุฉ ููุชูููุฐ
- ุชููุต ุงููููุงุช ูู ุงููุฎุฒูู ุงููุชุงุญ
```

**API:** `PUT /api/DistributionTrip/PostDistributionTrip`

### **ุงููุฑุญูุฉ ุงูุซุงูุซุฉ: ุงุณุชูุงู ุงูุจุถุงุนุฉ (ูุญุฏุซุฉ)**
```
- ุนูุฏุฉ ุงูููุธู ูู ุงูุฑุญูุฉ
- ุชุณุฌูู ุงููููุงุช ุงููุฑุฌุนุฉ ููุท ููู ููุชุฌ
- ุชุบููุฑ ุญุงูุฉ ุงูุฑุญูุฉ ุฅูู "ุชู ุงุณุชูุงู ุงูุจุถุงุนุฉ"
```

**API:** `PUT /api/DistributionTrip/ReceiveGoods`

### **ุงููุฑุญูุฉ ุงูุฑุงุจุนุฉ: ุฅูุดุงุก ููุงุชูุฑ ุงููุจูุนุงุช (ูุญุฏุซุฉ)**
```
- ุฅูุดุงุก ููุงุชูุฑ ูุจูุนุงุช ูู ููุน "ูุจูุน ููุฒุน"
- ูููู ุฅูุดุงุก ููุงุชูุฑ ูู ูุงุฌูุฉ ููุงุชูุฑ ุงููุจูุนุงุช ุงูุนุงุฏูุฉ ูุน ุชุญุฏูุฏ ุงูููุน
- ูู ูุงุชูุฑุฉ ุชุถูู ุงููููุฉ ุงููุจุงุนุฉ ููููุชุฌ ุชููุงุฆูุงู ูู ุฑุญูุฉ ุงูุชูุฒูุน
- ุฑุจุท ุงูููุงุชูุฑ ุจุฑุญูุฉ ุงูุชูุฒูุน
```

**API:** `POST /api/SalesInvoice/CreateSalesInvoice` (ูุน `Type: Distributor`)

### **ุงููุฑุญูุฉ ุงูุฎุงูุณุฉ: ุงูุชุญูู ูู ุงููููุงุช**
```
- ุงูุชุญูู ูู ุตุญุฉ ุงููููุงุช ุงููุณุฌูุฉ
- ุงูุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ููุต ุฃู ุฒูุงุฏุฉ
- ุนุฑุถ ุงูุชุญุฐูุฑุงุช ูุงูุฃุฎุทุงุก ุฅู ูุฌุฏุช
```

**API:** `GET /api/DistributionTrip/ValidateTripQuantities`

### **ุงููุฑุญูุฉ ุงูุณุงุฏุณุฉ: ุฅููุงู ุงูุฑุญูุฉ**
```
- ุงูุชุญูู ูู ุงูุชูุงู ุฌููุน ุงูุนูููุงุช
- ุชุบููุฑ ุญุงูุฉ ุงูุฑุญูุฉ ุฅูู "ููุชููุฉ"
- ุชููุต ุงููููุงุช ูู ุงููุฎุฒูู ุงูููุฌูุฏ
```

**API:** `PUT /api/DistributionTrip/CompleteTrip`

## ๐ ุญุงูุงุช ุฑุญูุฉ ุงูุชูุฒูุน

| ุงูุญุงูุฉ | ุงููุตู | ุงูุนูููุงุช ุงููุณููุญุฉ |
|--------|--------|-------------------|
| **Draft** | ูุณูุฏุฉ | ุชุนุฏููุ ุญุฐู |
| **Posted** | ูุฑุญูุฉ | ุงุณุชูุงู ุงูุจุถุงุนุฉ |
| **InProgress** | ููุฏ ุงูุชูููุฐ | - |
| **GoodsReceived** | ุชู ุงุณุชูุงู ุงูุจุถุงุนุฉ | ุฅูุดุงุก ููุงุชูุฑุ ุฅููุงู ุงูุฑุญูุฉ |
| **Completed** | ููุชููุฉ | ุนุฑุถ ููุท |
| **Cancelled** | ููุบูุฉ | ุนุฑุถ ููุท |

## ๐๏ธ ุงูุญููู ุงูุฌุฏูุฏุฉ

### **DistributionTrip**
- `Status`: ุญุงูุฉ ุงูุฑุญูุฉ (enum)
- `Details`: ูุงุฆูุฉ ุชูุงุตูู ุงูุฑุญูุฉ
- `DistributionTripSalesInvoices`: ููุงุชูุฑ ุงููุจูุนุงุช ุงููุฑุชุจุทุฉ ุจุงูุฑุญูุฉ

### **DistributionTripDetail**
- `Qty`: ุงููููุฉ ุงููุญููุฉ
- `ExpectedPrice`: ุงูุณุนุฑ ุงููุชููุน
- `ReturnedQty`: ุงููููุฉ ุงููุฑุฌุนุฉ (ุชูุฎุฒู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช)
- `SoldQty`: ุงููููุฉ ุงููุจุงุนุฉ (ุชูุญุฏุซ ุนูุฏ ุฅุถุงูุฉ ููุงุชูุฑ ุงููุจูุนุงุช)

### **SalesInvoice (ูุญุฏุซ)**
- `Type`: ููุน ุงููุงุชูุฑุฉ (Regular/Distributor)
- `DistributionTripId`: ุฑุจุท ุจุฑุญูุฉ ุงูุชูุฒูุน (ุงุฎุชูุงุฑู)

## ๐ง API Endpoints

### **ุฅุฏุงุฑุฉ ุงูุฑุญูุงุช**
```
GET    /api/DistributionTrip/GetPagedListDistributionTrip
POST   /api/DistributionTrip/CreateDistributionTrip
PUT    /api/DistributionTrip/UpdateDistributionTrip
```

### **ุณูุฑ ุงูุนูู**
```
PUT    /api/DistributionTrip/PostDistributionTrip
PUT    /api/DistributionTrip/ReceiveGoods
PUT    /api/DistributionTrip/CompleteTrip
```

### **ุงูุชุญูู ูุงูุชุญููู**
```
GET    /api/DistributionTrip/ValidateTripQuantities
```

### **ููุงุชูุฑ ุงููุจูุนุงุช (ูุญุฏุซุฉ)**
```
POST   /api/SalesInvoice/CreateSalesInvoice (ูุน Type: Distributor)
GET    /api/SalesInvoice/GetPagedListSalesInvoice
PUT    /api/SalesInvoice/UpdateSalesInvoice
```

## ๐ ุฃูุซูุฉ ุนูู ุงูุงุณุชุฎุฏุงู

### **ุฅูุดุงุก ุฑุญูุฉ ุชูุฒูุน**
```json
{
  "employeeId": 1,
  "carId": 1,
  "regionId": 1,
  "tripDate": "2025-01-15",
  "loadQty": 500,
  "notes": "ุฑุญูุฉ ุชูุฒูุน ููููุทูุฉ ุงูุดูุงููุฉ",
  "details": [
    {
      "productId": 1,
      "qty": 100,
      "expectedPrice": 25.50
    },
    {
      "productId": 2,
      "qty": 50,
      "expectedPrice": 30.00
    }
  ]
}
```

### **ุงุณุชูุงู ุงูุจุถุงุนุฉ (ูุญุฏุซ)**
```json
{
  "tripId": 1,
  "details": [
    {
      "detailId": 1,
      "returnedQty": 15
    },
    {
      "detailId": 2,
      "returnedQty": 5
    }
  ]
}
```

### **ุฅูุดุงุก ูุงุชูุฑุฉ ูุจูุนุงุช ููุฒุน**
```json
{
  "invoiceNumber": "INV-001",
  "customerId": 1,
  "invoiceDate": "2025-01-15",
  "totalAmount": 765.00,
  "discount": 0,
  "paymentMethod": "ููุฏู",
  "notes": "ูุงุชูุฑุฉ ุชูุฒูุน",
  "type": "Distributor",
  "distributionTripId": 1,
  "details": [
    {
      "productId": 1,
      "quantity": 30,
      "unitPrice": 25.50,
      "subTotal": 765.00,
      "notes": "ุทูุจ ุนุงุฏู"
    }
  ]
}
```

**ููุงุญุธุฉ**: ุนูุฏ ุฅูุดุงุก ูุฐู ุงููุงุชูุฑุฉุ ุณูุชู ุชุญุฏูุซ `SoldQty` ููููุชุฌ ุฑูู 1 ูู ุฑุญูุฉ ุงูุชูุฒูุน ุฑูู 1 ุจุฅุถุงูุฉ 30.

## โ๏ธ ุงูุชุญูู ูู ุงููููุงุช (ูุญุฏุซ)

### **ุงูุฃุฎุทุงุก (Errors)**
- ุงููููุฉ ุงููุจุงุนุฉ (ุงููุญุฏุซุฉ) + ุงููููุฉ ุงููุฑุฌุนุฉ > ุงููููุฉ ุงููุญููุฉ
- ุนุฏู ุชุณุฌูู ุฃู ูููุงุช

### **ุงูุชุญุฐูุฑุงุช (Warnings)**
- ุงููููุฉ ุงููุฑุฌุนุฉ > 30% ูู ุงููููุฉ ุงููุญููุฉ
- ุนุฏู ุชุณุฌูู ุฃู ูุจูุนุงุช ุฃู ูุฑุชุฌุนุงุช

## ๐ ุงูุชูุงูู ูุน ุงูุฃูุธูุฉ ุงูุฃุฎุฑู

### **ูุน ูุธุงู ุงููุจูุนุงุช**
- ุฅูุดุงุก ููุงุชูุฑ ูุจูุนุงุช ูู ููุน "ูุจูุน ููุฒุน"
- ุฑุจุท ุงูููุงุชูุฑ ุจุฑุญูุงุช ุงูุชูุฒูุน
- ุชุญุฏูุซ ุงููููุงุช ุงููุจุงุนุฉ ุชููุงุฆูุงู ุนูุฏ ุฅูุดุงุก ุงูููุงุชูุฑ

### **ูุน ูุธุงู ุงููุฎุฒูู**
- ุนูุฏ **ุชุฑุญูู ุงูุฑุญูุฉ** โ ุชููุต ูู **ุงููููุฉ ุงููุชุงุญุฉ**
- ุนูุฏ **ุฅููุงู ุงูุฑุญูุฉ** โ ุชููุต ูู **ุงููููุฉ ุงูููุฌูุฏุฉ**
- **ููุงุชูุฑ ุงููุจูุนุงุช** ูุง ุชุคุซุฑ ุนูู ุงููุฎุฒูู ูุจุงุดุฑุฉ

### **ูุน ูุธุงู ุงููุญุงุณุจุฉ**
- ุชุชุจุน ุฅูุฑุงุฏุงุช ุงูุชูุฒูุน
- ุญุณุงุจ ุชูุงููู ุงูููู
- ุชูููุฒ ููุงุชูุฑ ุงูููุฒุนูู ุนู ุงูููุงุชูุฑ ุงูุนุงุฏูุฉ

## ๐ ุงูุชูุงุฑูุฑ ุงููุชุงุญุฉ

1. **ุชูุฑูุฑ ุฑุญูุงุช ุงูุชูุฒูุน**
   - ุฑุญูุงุช/ููุธู
   - ุฑุญูุงุช/ุณูุงุฑุฉ
   - ุฑุญูุงุช/ููุทูุฉ

2. **ุชูุฑูุฑ ุฃุฏุงุก ุงูููุฒุนูู**
   - ูููุงุช ูุจุงุนุฉ/ููุฒุน (ูู ุงูููุงุชูุฑ ุงููุญุฏุซุฉ)
   - ูููุงุช ูุฑุฌุนุฉ/ููุฒุน
   - ูุณุจุฉ ุงููุจูุนุงุช

3. **ุชูุฑูุฑ ุชุญููู ุงููููุงุช**
   - ููุงุฑูุฉ ุงููููุงุช ุงููุญููุฉ ูุงููุจุงุนุฉ
   - ุชุญููู ุงููุฑุชุฌุนุงุช
   - ุชุญุฏูุฏ ุงูููุชุฌุงุช ุงูุฃูุซุฑ ุทูุจุงู

4. **ุชูุฑูุฑ ููุงุชูุฑ ุงูููุฒุนูู**
   - ููุงุชูุฑ/ุฑุญูุฉ ุชูุฒูุน
   - ุฅูุฑุงุฏุงุช/ููุฒุน
   - ุชุญููู ุงููุจูุนุงุช ุญุณุจ ุงูููุน

## ๐ ุณูุฑ ุงูุนูู ุงูุฌุฏูุฏ

```
ุฅูุดุงุก ุฑุญูุฉ โ ุชุฑุญูู (ุชููุต ูู ุงููุชุงุญ) โ ุงุณุชูุงู ุงูุจุถุงุนุฉ (ุงููุฑุชุฌุนุงุช ููุท) โ 
ุฅูุดุงุก ููุงุชูุฑ (ุชุญุฏุซ ุงููุจุงุน ุชููุงุฆูุงู) โ ุงูุชุญูู ูู ุงููููุงุช โ ุฅููุงู (ุชููุต ูู ุงูููุฌูุฏ)
```

## ๐ ุงูููุฒุงุช ุงููุณุชูุจููุฉ

1. **ุชุทุจูู GPS** ูุชุชุจุน ุงูุฑุญูุงุช ูู ุงูููุช ุงููุนูู
2. **ูุธุงู ุฌุฏููุฉ ุฐูู** ูุชุญุณูู ุงููุณุงุฑุงุช
3. **ุชุทุจูู ููุจุงูู** ููููุฒุนูู
4. **ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ** ููููุธููู
5. **ุชุญููู ูุชูุฏู** ููุจูุงูุงุช
6. **ุฅุฏุงุฑุฉ ุงููููุฏ** ููุตุฑููุงุช ุงูุณูุงุฑุงุช
7. **ุชุชุจุน ุงูุฃุฏุงุก** ููููุฒุนูู
8. **ุชูุงุฑูุฑ ูุงููุฉ** ููุตูุฉ ููุชูุฒูุน
